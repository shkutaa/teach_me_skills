var globalAjaxOptions={AJAX_REQUEST_HTTP_HOST:null,AJAX_ON_ERROR:null,AJAX_RETURN_XML_ONLY:true,AJAX_LAST_RESULT_STATUS:true}
jQuery(document).ready(function(){if(jQuery.isFunction(window['beforePrepare'])){window['beforePrepare']();}
prepareActions();if(jQuery.isFunction(window['afterPrepare'])){window['afterPrepare']();}});function prepareActions(actualContext){if(typeof actualContext!='object'){actualContext=null;}
jQuery('[id*="_ajaxclick"]',actualContext).unbind('click').bind('click',function(event){ajaxElementAction(this,'click',event);});jQuery('[id*="_ajaxmouseenter"]',actualContext).unbind('mouseenter').bind('mouseenter',function(event){ajaxElementAction(this,'mouseenter',event);});jQuery('[id*="_ajaxmouseout"]',actualContext).unbind('mouseout').bind('mouseout',function(event){ajaxElementAction(this,'mouseout',event);});jQuery('[id*="_ajaxmouseover"]',actualContext).unbind('mouseover').bind('mouseover',function(event){ajaxElementAction(this,'mouseover',event);});jQuery('[id*="_ajaxchange"]',actualContext).unbind('change').bind('change',function(event){ajaxElementAction(this,'change',event);});}
function parseElementId(elementId,actionType){var result={ACTIONTYPE:null,ACTION:null,PARAM:null};if(typeof elementId=='string'&&elementId.length>0){var eActionSearch=elementId.match("ajax"+actionType+"[A-Za-z0-9-]*");if(jQuery.isArray(eActionSearch)&&eActionSearch.length==1){var eActionSearchData=eActionSearch.pop().split('-').reverse();if(jQuery.isArray(eActionSearchData)&&eActionSearchData.length>=2&&eActionSearchData.pop()==="ajax"+actionType){result.ACTIONTYPE=actionType;result.ACTION=eActionSearchData.pop();result.ACTION=result.ACTION.substr(0,1).toUpperCase()+result.ACTION.substr(1);if(eActionSearchData.length>0){result.PARAM=eActionSearchData.reverse();}}}}
return result;}
function ajaxElementAction(element,actionType,event){var actionData=parseElementId(jQuery(element).attr("id"),actionType);if(actionData.ACTIONTYPE!==null){var functionBefore='before'+actionData.ACTION;var functionAfter='after'+actionData.ACTION;var beforeResult=null;var copyRequestParam=jQuery.isArray(actionData.PARAM)?actionData.PARAM.slice():new Array();if(!jQuery.isFunction(window[functionBefore])||(beforeResult=window[functionBefore](actionData.PARAM,element))!==false){if(jQuery.isArray(beforeResult)&&beforeResult.length>0){actionData.PARAM=beforeResult;}else if(typeof beforeResult=='object'){actionData.PARAM=copyRequestParam;for(var objectKey in beforeResult){if(actionData.objectKey===undefined){actionData[objectKey]=beforeResult[objectKey];}}}else{actionData.PARAM=copyRequestParam;}
if(jQuery.isFunction(window[functionAfter])){requestResult=ajaxSendRequest(actionData,window[functionAfter]);}else{requestResult=ajaxSendRequest(actionData,null);}}}}
function arrayToJSON(inputArray){if(jQuery.isArray(inputArray)){var resultJSON='["'+inputArray.join('","')+'"]';return resultJSON;}
return null;}
function getError(requestResult){var errorCode=parseInt(jQuery(requestResult).find("code").text(),10);return!isNaN(errorCode)?errorCode:-1;}
function ajaxSendRequest(requestData,successCallbackFunction){var requestUrl=globalAjaxOptions.AJAX_REQUEST_HTTP_HOST!=null?globalAjaxOptions.AJAX_REQUEST_HTTP_HOST+"request.php":"request.php";var requestResultType=globalAjaxOptions.AJAX_RETURN_XML_ONLY===true?'xml':'text';var requestSendData={"REQUEST_ACTION":requestData.ACTION};if(jQuery.isArray(requestData.PARAM)){var requestParamLength=requestData.PARAM.length;for(var zx=0;zx<requestParamLength;zx++){requestSendData["PARAM"+(zx+1)]=requestData.PARAM[zx];}}
for(var objectKey in requestData){if(objectKey!='ACTIONTYPE'&&objectKey!='ACTION'&&objectKey!='PARAM'){requestSendData[objectKey]=requestData[objectKey];}}
jQuery.ajax({async:true,data:requestSendData,dataType:requestResultType,type:"POST",url:requestUrl,success:function(rData,rStatus){globalAjaxOptions.AJAX_LAST_RESULT_STATUS=true;if(jQuery.isFunction(successCallbackFunction)){successCallbackFunction(rData);}else if(jQuery.isFunction(window[successCallbackFunction])){window[successCallbackFunction](rData);}},error:function(XMLHttpRequest,rStatus){globalAjaxOptions.AJAX_LAST_RESULT_STATUS=false;if(jQuery.isFunction(globalAjaxOptions.AJAX_ON_ERROR)){globalAjaxOptions.AJAX_ON_ERROR(rStatus);}}});};