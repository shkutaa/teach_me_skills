;(function($,window,document,notDefined){var pluginName="breadcrumbs",oldWidth=0,defaults={filterClass:'.a-open',itemsSelector:'> li',resize:false};function Plugin(element,options){this.element=element;this.options=$.extend({},defaults,options);this.init();}
Plugin.prototype={constructor:Plugin,init:function(){var _this=this;this.collectionItems=$(this.options.itemsSelector,this.element).not(this.options.filterClass);this.collectItemsNoHide=$(this.options.filterClass,this.element);this.collectionItems.children().on('mouseenter mouseleave',function(ev){if(ev.type==='mouseenter'){_this._showItem(this);}
else{_this._hideItem(this);}});_this._reLayout();oldWidth=$(this.element).width();if(this.options.resize){$(window).on("throttledresize.breadcrumbs",function(){if(oldWidth!==$(_this.element).width()){oldWidth=$(this.element).width();_this._reLayout();}});}},_showItem:function(el){var _this=this,$t=$(el),$t_par=$t.parent();if(!$t_par.data('set_width')){var idx=_this.collectionItems.index($t_par),inBread=[],diff=$t_par.data('def_width')-$t_par.data('curr_width');if((idx+1)===(_this.collectionItems.length)){for(var a=0;a<idx;a++){inBread.push(_this.collectionItems[a]);}}
else{for(var b=idx+1;b<_this.collectionItems.length;b++){inBread.push(_this.collectionItems[b]);}}
var eqDiff=Math.floor(diff/inBread.length);for(var k=0;k<inBread.length;k++){var $el=$(inBread[k]),new_width=$el.data('curr_width')-eqDiff;if(new_width-eqDiff<0){$el.children().width(5).addClass('shrink');}
else{$el.children().width(new_width).addClass('shrink');}}
$t.width($t_par.data('def_width')).removeClass('shrink');}},_hideItem:function(el){var _this=this,$t=$(el),$t_par=$t.parent();if(!$t_par.data('set_width')){var idx=_this.collectionItems.index($t_par),inBread=[];if((idx+1)===(_this.collectionItems.length)){for(var a=0;a<idx;a++){inBread.push(_this.collectionItems[a]);}}
else{for(var b=idx+1;b<_this.collectionItems.length;b++){inBread.push(_this.collectionItems[b]);}}
for(var k=0;k<inBread.length;k++){var $el=$(inBread[k]),$el_child=$el.children(),new_width=$el.data('curr_width');$el_child.width(new_width);if($el.data('set_width')){$el_child.removeClass('shrink');}
else{$el_child.addClass('shrink');}}
$t.width($t_par.data('curr_width')).addClass('shrink');}},_reLayout:function(){var _this=this;this.workingArea=$(this.element).width()-20;$(this.element).removeClass('setanim');this.collectItemsNoHide.each(function(){var $t=$(this),defWidth=$('span',$t).width(),checkWidth=defWidth+parseInt($t.css('paddingLeft'))+parseInt($t.css('paddingRight'));_this.workingArea=_this.workingArea-checkWidth;});_this.collectionItems.each(function(){var $t=$(this);$t.data('set_width',false);});function setWidth(){var findMinimum=false,inWork=[];_this.collectionItems.each(function(){if(!$(this).data('set_width')){inWork.push($(this));}});if(inWork.length>0){var eqWidth=Math.floor(_this.workingArea/inWork.length);for(var i=0;i<inWork.length;i++){var $t=inWork[i],defWidth=$('span',$t).width(),checkWidth=defWidth+parseInt($t.css('paddingLeft'))+parseInt($t.css('paddingRight'));$t.data('def_width',defWidth);if(checkWidth<eqWidth){findMinimum=true;$t.data('set_width',true);$t.children().width(defWidth);$t.data('curr_width',defWidth);_this.workingArea=_this.workingArea-checkWidth;}}}
if(!findMinimum){var inBread=[];_this.collectionItems.each(function(){if(!$(this).data('set_width')){inBread.push($(this));}});var fmWidth=Math.floor(_this.workingArea/inBread.length);for(var k=inBread.length-1;k>=0;k--){var $k=$(inBread[k]);var getPadding=parseInt($k.css('paddingLeft'))+parseInt($k.css('paddingRight'));var newWidth=fmWidth-getPadding;$k.data('curr_width',newWidth);$k.children().width(newWidth).addClass('shrink');}
$(_this.element).addClass('setanim');}
else{setWidth();}}
setWidth();}};$.fn[pluginName]=function(options){var args=arguments,_return;if(options===notDefined||typeof options==='object'){_return=this.each(function(){if(!$.data(this,'plugin_'+pluginName)){$.data(this,'plugin_'+pluginName,new Plugin(this,options));}});}else if(typeof options==='string'&&options[0]!=='_'&&options!=='init'){_return=this.each(function(){var instance=$.data(this,'plugin_'+pluginName);if(instance instanceof Plugin&&typeof instance[options]==='function'){instance[options].apply(instance,Array.prototype.slice.call(args,1));}});}
return _return;};}(jQuery,window,document));;